# Guardian Eye - é ç«¯æ§åˆ¶ç³»çµ±

## å°ˆæ¡ˆç°¡ä»‹

Guardian Eye æ˜¯ä¸€å€‹åŸºæ–¼ Node.js å’Œ Qt çš„æ™ºæ…§å®‰å…¨ç³»çµ±ï¼Œæ”¯æ´é ç«¯è­¦å ±ç›£æ§å’Œé›™é‡é©—è­‰è§£é–æ©Ÿåˆ¶ã€‚

## åŠŸèƒ½ç‰¹è‰²

- **å³æ™‚è­¦å ±ç›£æ§**ï¼šé€éç¶²é å³æ™‚æŸ¥çœ‹ç³»çµ±è­¦å ±ç‹€æ…‹
- **é ç«¯è§£é–**ï¼šæ‰‹æ©Ÿè¼¸å…¥å¯†ç¢¼ + ç¾å ´è¼¸å…¥éš¨æ©Ÿç¢¼ï¼ˆé›™é‡é©—è­‰ï¼‰
- **å¿«é€Ÿæ§åˆ¶**ï¼šéœéŸ³è­¦å ±ã€å¼·åˆ¶é–‹é–€ã€é‡ç½®ç³»çµ±ç­‰åŠŸèƒ½
- **æ­·å²è¨˜éŒ„**ï¼šæŸ¥çœ‹ç³»çµ±äº‹ä»¶æ­·å²
- **è‡ªå‹•è¼ªè©¢**ï¼šæ¯ç§’è‡ªå‹•æ›´æ–°ç³»çµ±ç‹€æ…‹

## å°ˆæ¡ˆçµæ§‹

```
guardian_eye_remote/
â”œâ”€â”€ server.js              # Node.js ä¸»ä¼ºæœå™¨
â”œâ”€â”€ public/                # éœæ…‹ç¶²é æª”æ¡ˆ
â”‚   â”œâ”€â”€ index.html         # ä¸»é é¢
â”‚   â”œâ”€â”€ style.css          # æ¨£å¼è¡¨
â”‚   â””â”€â”€ app.js             # å‰ç«¯ JavaScript
â””â”€â”€ README.md              # ä½¿ç”¨èªªæ˜
```

## å®‰è£æ­¥é©Ÿ

### 1. ç¢ºèª Node.js å·²å®‰è£

```bash
node --version  # æ‡‰é¡¯ç¤º v16.x.x æˆ–æ›´é«˜
npm --version   # æ‡‰é¡¯ç¤º 8.x.x æˆ–æ›´é«˜
```

### 2. å®‰è£ä¾è³´ï¼ˆåœ¨ TX2 ä¸Šï¼‰

```bash
cd guardian_eye_remote
npm install express
```

### 3. å•Ÿå‹•ä¼ºæœå™¨

```bash
node server.js
```

æˆåŠŸå•Ÿå‹•å¾Œæœƒé¡¯ç¤ºï¼š

```
========================================
ğŸ›¡ï¸  Guardian Eye Remote Control Server
========================================
âœ… Server running on http://0.0.0.0:8080
ğŸ“± æ‰‹æ©Ÿè¨ªå•ï¼ˆè«‹ç¢ºä¿åœ¨åŒä¸€ WiFiï¼‰ï¼š
   http://192.168.1.100:8080
========================================
ğŸ“‚ éœæ…‹æª”æ¡ˆç›®éŒ„: /path/to/public
ğŸ” è§£é–å¯†ç¢¼: 1234
========================================
```

## ä½¿ç”¨æ–¹å¼

### æ‰‹æ©Ÿè¨ªå•

1. ç¢ºä¿æ‰‹æ©Ÿå’Œ TX2 é€£æ¥åŒä¸€ WiFi
2. åœ¨ TX2 ä¸ŠåŸ·è¡Œ `hostname -I` å–å¾— IP ä½å€
3. åœ¨æ‰‹æ©Ÿç€è¦½å™¨è¼¸å…¥ï¼š`http://<TX2_IP>:8080`

### é ç«¯è§£é–æµç¨‹

1. **è­¦å ±è§¸ç™¼**ï¼šç³»çµ±åµæ¸¬åˆ°å…¥ä¾µï¼Œæ‰‹æ©Ÿé¡¯ç¤ºè­¦å ±
2. **è¼¸å…¥å¯†ç¢¼**ï¼šåœ¨æ‰‹æ©Ÿç¶²é è¼¸å…¥è§£é–å¯†ç¢¼ï¼ˆé è¨­ï¼š1234ï¼‰
3. **é©—è­‰é€šé**ï¼šä¼ºæœå™¨é©—è­‰å¯†ç¢¼æ­£ç¢º
4. **ç¾å ´ç¢ºèª**ï¼šQt ä»‹é¢é¡¯ç¤ºéš¨æ©Ÿç¢¼ï¼Œéœ€åœ¨ç¾å ´è¼¸å…¥
5. **å®Œå…¨è§£é–**ï¼šå…©æ­¥é©—è­‰å®Œæˆï¼Œç³»çµ±è§£é™¤è­¦å ±

## API æ–‡ä»¶

### GET /api/status

å–å¾—ç³»çµ±ç•¶å‰ç‹€æ…‹ï¼ˆæ¯ç§’è¼ªè©¢ï¼‰

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
{
  "alarm_active": true,
  "alarm_type": "pig",
  "alarm_time": "2025-01-09 14:25:05",
  "alarm_confidence": 0.96,
  "remote_unlocked": false,
  "server_time": "2025-01-09T14:25:10.000Z",
  "uptime": 3600
}
```

### POST /api/unlock

é ç«¯è§£é–é©—è­‰

**è«‹æ±‚é«”ï¼š**
```json
{
  "password": "1234"
}
```

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
{
  "success": true,
  "message": "âœ… é ç«¯é©—è­‰é€šéï¼è«‹å›å®¶è¼¸å…¥ç¾å ´éš¨æ©Ÿå¯†ç¢¼ã€‚"
}
```

### GET /api/history

å–å¾—æ­·å²è¨˜éŒ„

**å›æ‡‰ç¯„ä¾‹ï¼š**
```json
[
  {
    "time": "2025-01-09 14:25:05",
    "event": "å°è±¬å…¥ä¾µè­¦å ±",
    "status": "å·²è§£é™¤",
    "type": "alarm"
  }
]
```

### POST /api/control

åŸ·è¡Œæ§åˆ¶æŒ‡ä»¤

**è«‹æ±‚é«”ï¼š**
```json
{
  "action": "mute_alarm"
}
```

å¯ç”¨æŒ‡ä»¤ï¼š
- `mute_alarm`ï¼šéœéŸ³è­¦å ±
- `open_door`ï¼šå¼·åˆ¶é–‹é–€
- `reset`ï¼šé‡ç½®ç³»çµ±
- `test_alarm`ï¼šæ¸¬è©¦è­¦å ±

## Qt æ•´åˆ

### å…±äº«æª”æ¡ˆ

ç³»çµ±ä½¿ç”¨ä»¥ä¸‹æª”æ¡ˆèˆ‡ Qt é€šè¨Šï¼š

#### 1. è­¦å ±ç‹€æ…‹ï¼ˆQt å¯«å…¥ï¼ŒNode.js è®€å–ï¼‰
**æª”æ¡ˆï¼š** `/tmp/guardian_alarm_status.json`

```json
{
  "alarm_active": true,
  "alarm_type": "pig",
  "timestamp": "2025-01-09 14:25:05",
  "image_path": "/tmp/guardian_images/pig_001.jpg",
  "confidence": 0.96
}
```

#### 2. è§£é–ç‹€æ…‹ï¼ˆNode.js å¯«å…¥ï¼ŒQt è®€å–ï¼‰
**æª”æ¡ˆï¼š** `/tmp/guardian_unlock_status.json`

```json
{
  "remote_unlocked": true,
  "password_correct": true,
  "timestamp": "2025-01-09 14:26:00",
  "unlock_method": "web"
}
```

#### 3. æ§åˆ¶æŒ‡ä»¤ï¼ˆNode.js å¯«å…¥ï¼ŒQt è®€å–ï¼‰
**æª”æ¡ˆï¼š** `/tmp/guardian_control.txt`

å…§å®¹ï¼šå–®è¡Œæ–‡å­—ï¼ˆæŒ‡ä»¤åç¨±ï¼‰ï¼Œå¦‚ï¼š`open_door`

Qt éœ€æ¯ç§’æª¢æŸ¥æ­¤æª”æ¡ˆï¼Œè®€å–å¾ŒåŸ·è¡ŒæŒ‡ä»¤ä¸¦åˆªé™¤æª”æ¡ˆã€‚

## é…ç½®é¸é …

### æ›´æ”¹å¯†ç¢¼

ä½¿ç”¨ç’°å¢ƒè®Šæ•¸è¨­å®šï¼š

```bash
export UNLOCK_PASSWORD="mypassword"
node server.js
```

### æ›´æ”¹ç«¯å£

ä¿®æ”¹ [server.js:6](server.js#L6)ï¼š

```javascript
const PORT = 8080;  // æ”¹æˆä½ æƒ³è¦çš„ç«¯å£
```

### é˜²ç«ç‰†è¨­å®š

å¦‚æœç„¡æ³•é€£ç·šï¼Œéœ€é–‹å•Ÿé˜²ç«ç‰†ï¼š

```bash
sudo ufw allow 8080
```

## æ¸¬è©¦æ–¹å¼

### æ¨¡æ“¬è­¦å ±

```bash
echo '{
  "alarm_active": true,
  "alarm_type": "pig",
  "timestamp": "2025-01-09 14:25:05",
  "confidence": 0.96
}' > /tmp/guardian_alarm_status.json
```

### æ¸¬è©¦è§£é– API

```bash
curl -X POST http://localhost:8080/api/unlock \
  -H "Content-Type: application/json" \
  -d '{"password": "1234"}'
```

### æ¸¬è©¦æ§åˆ¶æŒ‡ä»¤

```bash
curl -X POST http://localhost:8080/api/control \
  -H "Content-Type: application/json" \
  -d '{"action": "test_alarm"}'
```

## å¸¸è¦‹å•é¡Œ

### Q1: æ‰‹æ©Ÿç„¡æ³•é€£ç·šï¼Ÿ

**æª¢æŸ¥æ­¥é©Ÿï¼š**

1. ç¢ºèªæœå‹™åŸ·è¡Œï¼š
   ```bash
   ps aux | grep node
   ```

2. ç¢ºèªç«¯å£ç›£è½ï¼š
   ```bash
   netstat -tuln | grep 8080
   ```

3. æ¸¬è©¦æœ¬æ©Ÿé€£ç·šï¼š
   ```bash
   curl http://localhost:8080/health
   ```

4. æª¢æŸ¥é˜²ç«ç‰†ï¼š
   ```bash
   sudo ufw status
   ```

### Q2: Qt è®€ä¸åˆ°è§£é–ç‹€æ…‹ï¼Ÿ

ç¢ºèªæª”æ¡ˆæ¬Šé™ï¼š
```bash
ls -l /tmp/guardian_unlock_status.json
```

æ‰‹å‹•æ¸¬è©¦å¯«å…¥ï¼š
```bash
echo '{"remote_unlocked": true, "password_correct": true}' > /tmp/guardian_unlock_status.json
```

### Q3: å¦‚ä½•é‡ç½®ç³»çµ±ï¼Ÿ

```bash
# åˆªé™¤æ‰€æœ‰å…±äº«æª”æ¡ˆ
rm /tmp/guardian_*.json
rm /tmp/guardian_control.txt

# é‡å•Ÿä¼ºæœå™¨
pkill node
node server.js
```

## ç³»çµ±éœ€æ±‚

- **ä½œæ¥­ç³»çµ±**ï¼šLinux (TX2)
- **Node.js**ï¼šv16.x æˆ–æ›´é«˜
- **ç¶²è·¯**ï¼šWiFi å€åŸŸç¶²è·¯
- **ç€è¦½å™¨**ï¼šæ”¯æ´ç¾ä»£ç€è¦½å™¨ï¼ˆChromeã€Safariã€Firefoxï¼‰

## æŠ€è¡“æ¶æ§‹

- **å¾Œç«¯**ï¼šNode.js + Express.js
- **å‰ç«¯**ï¼šåŸç”Ÿ HTML/CSS/JavaScript
- **é€šè¨Š**ï¼šæª”æ¡ˆå…±äº«ï¼ˆè¼ªè©¢æ©Ÿåˆ¶ï¼‰
- **è³‡æ–™æ ¼å¼**ï¼šJSON

## é–‹ç™¼åœ˜éšŠ

NTUT å¾®è™•ç†æ©Ÿç³»çµ±å¯¦é©— - Final Project

## æˆæ¬Š

MIT License

---

**ç¥ä½¿ç”¨é †åˆ©ï¼** ğŸš€

å¦‚æœ‰å•é¡Œè«‹è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚
